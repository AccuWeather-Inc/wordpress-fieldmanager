!function(){var e,t=[];(e=jQuery)(document).on("click",".fm-media-remove",(function(t){t.preventDefault(),e(this).parents(".fm-item.fm-media").find(".fm-media-id").val(0),e(this).parents(".fm-item.fm-media").find(".media-wrapper").html("")})),e(document).on("click",".media-wrapper a",(function(t){t.preventDefault(),e(this).closest(".media-wrapper").siblings(".fm-media-button").click()})),e(document).on("click",".fm-media-button",(function(i){var a=e(this),r={};i.preventDefault(),t[a.attr("id")]||(a.data("mime-type")&&"all"!==a.data("mime-type")&&(r.type=a.data("mime-type")),t[a.attr("id")]=wp.media({library:r,title:a.data("choose"),button:{text:a.data("update")}}),a.data("mime-type")&&"all"!==a.data("mime-type")&&t[a.attr("id")].on("library:selection:add",(function(){if(void 0!==t[a.attr("id")]&&t[a.attr("id")].$el.is(":visible")){var e=t[a.attr("id")].state().get("selection"),i=e.first();i.attributes.type!==a.data("mime-type")&&e.remove(i)}})),t[a.attr("id")].on("select",(function(){var e=t[a.attr("id")].state().get("selection").first().attributes;if(props={size:a.data("preview-size")||"thumbnail"},props=wp.media.string.props(props,e),props.align="none",props.link="custom",props.linkUrl="#",props.caption="",a.parent().find(".fm-media-id").val(e.id),"image"==e.type){props.url=props.src;var i="Uploaded file:<br />";i+=wp.media.string.image(props)}else i="Uploaded file:&nbsp;",i+=wp.media.string.link(props);i+='<br /><a class="fm-media-remove fm-delete" href="#">remove</a>';var r=a.parent().find(".media-wrapper");r.html(i).trigger("fieldmanager_media_preview",[r,e,wp])})),t[a.attr("id")].on("open",(function(){var e,i=t[a.attr("id")].state().get("selection"),r=a.parent().find(".fm-media-id").val();""!==r&&-1!==r&&void 0!==wp.media.attachment&&(e=wp.media.attachment(r)).fetch(),i.reset(e?[e]:[])}))),t[a.attr("id")].open()}))}();
//# sourceMappingURL=fieldmanager-media.bundle.min.js.map