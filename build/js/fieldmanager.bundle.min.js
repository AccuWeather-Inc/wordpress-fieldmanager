(()=>{"use strict";var t={609:t=>{t.exports=jQuery}},i={};function e(a){if(i[a])return i[a].exports;var r=i[a]={exports:{}};return t[a](r,r.exports,e),r.exports}(()=>{var t,i,a,r,s,n,l,o,f=e(609),m={};t=f,i=0,a=function(i){t(i).hasClass("ui-sortable")||t(i).sortable({handle:".fmjs-drag",items:"> .fm-item",placeholder:"sortable-placeholder",forcePlaceholderSize:!0,start:function(e,a){t(document).trigger("fm_sortable_drag",i)},stop:function(e,a){var r=a.item.parents(".fm-wrapper").first();n(r),t(document).trigger("fm_sortable_drop",i)}})},r=function(){t(".fmjs-sortable").each((function(){if(t(this).is(":visible"))a(this);else{var i=this;t(i).parents(".fm-group").bind("fm_collapsible_toggle",(function(){t(i).is(":visible")&&a(i)}))}}))},s=function(){t(".fm-label-with-macro").each((function(i){t(this).data("label-original",t(this).html());var e=t(this).parents(".fm-group").first().find(t(this).data("label-token"));if(e.length>0){var a=t(e[0]);if("function"==typeof a.val){var r=t(this),s=function(){var t="";if("SELECT"==a.prop("tagName")){var i=a.find("option:selected");i.val()&&(t=i.text())}else t=a.val();t.length>0?r.html(r.data("label-format").replace("%s",t)):r.html(r.data("label-original"))};a.on("change keyup",s),s()}}}))},n=function(e){e.each((function(){var e=t(this).data("fm-array-position")-0,a=0;e>0&&t(this).find("> .fm-item").each((function(){t(this).hasClass("fmjs-proto")||(t(this).find(".fm-element, .fm-incrementable").each((function(){var r=t(this).attr("name");if(r){var s=(r=r.replace(/\]/g,"")).split("[");if(s[e]!=a){s[e]=a;var n=s[0]+"["+s.slice(1).join("][")+"]";if(t(this).attr("name",n),t(this).attr("id")&&t(this).attr("id").match("-proto")&&!n.match("proto")){if(t(this).attr("id","fm-edit-dynamic-"+i),t(this).parent().hasClass("fm-option"))t(this).parent().find("label").attr("for","fm-edit-dynamic-"+i);else{var l=t(this).closest(".fm-item");l.length&&l.find(".fm-label label").length&&l.find(".fm-label label").attr("for","fm-edit-dynamic-"+i)}return void i++}}}t(this).hasClass("fm-incrementable")&&(t(this).attr("id","fm-edit-dynamic-"+i),i++)})),a++)})),t(this).find(".fm-wrapper").each((function(){n(t(this))}))}))},l=function(i){var e=t(i).data("display-value");try{e=e.split(",")}catch(t){e=[e]}return e},o=function(t,i){for(var e in t)if(t[e]==i)return!0;return!1},fmLoadModule((function(){t(document).on("click",".fm-add-another",(function(i){i.preventDefault(),function(i){var e=i.data("related-element"),a=i.data("limit")-0,l=i.parent().siblings(".fm-item").not(".fmjs-proto"),o=i.data("add-more-position")||"bottom";if(!(a>0&&l.length>=a)){var f=t(".fmjs-proto.fm-"+e,i.closest(".fm-wrapper")).first().clone();f.removeClass("fmjs-proto"),f="bottom"==o?f.insertBefore(i.parent()):f.insertAfter(i.parent()),n(i.parents(".fm-wrapper")),i.parent().siblings().last().trigger("fm_added_element"),s(),r()}}(t(this))})),t(document).on("click",".fmjs-remove",(function(i){var e,a;i.preventDefault(),a=(e=t(this)).parents(".fm-wrapper").first(),e.parents(".fm-item").first().remove(),n(a)})),t(document).on("click",".fmjs-collapsible-handle",(function(){t(this).parents(".fm-group").first().children(".fm-group-inner").slideToggle("fast"),n(t(this).parents(".fm-wrapper").first()),t(this).parents(".fm-group").first().trigger("fm_collapsible_toggle"),t(this).toggleClass("closed"),t(this).hasClass("closed")?t(this).attr("aria-expanded","false"):t(this).attr("aria-expanded","true")})),t(".fm-collapsed > .fm-group:not(.fmjs-proto) > .fm-group-inner").hide(),m.init_display_if=function(){var i,e=t(this).data("display-src"),a=l(this),r=t(this).siblings(".fm-"+e+"-wrapper").find(".fm-element").not("div, .fm-autocomplete, .fm-checkbox-hidden");0!==r.length&&(i=r.is(":checkbox")?r.is(":checked")?r.val():r.siblings('input[type=hidden][name="'+r.attr("name")+'"]').val():r.is(":radio")?r.filter(":checked").length?r.filter(":checked").val():"":r.val().split(","),r.addClass("display-trigger"),o(a,i)||t(this).hide())},t(".fm-display-if").each(m.init_display_if),m.trigger_display_if=function(){var i,e=t(this),a=e.attr("name");i=e.is(":checkbox")?e.is(":checked")?e.val():e.siblings('input[type=hidden][name="'+a+'"]').val():e.is(":radio")?e.filter(":checked").val():e.val().split(","),t(this).closest(".fm-wrapper").siblings().each((function(){t(this).hasClass("fm-display-if")&&a&&null!=a.match(t(this).data("display-src"))&&(o(l(this),i)?t(this).show():t(this).hide(),t(this).trigger("fm_displayif_toggle"))}))},t(document).on("change",".display-trigger",m.trigger_display_if),s(),r(),t(document).on("fm_activate_tab",r)}))})()})();
//# sourceMappingURL=fieldmanager.bundle.min.js.map