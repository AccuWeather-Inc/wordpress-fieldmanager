!function(){if(void 0===t)var t={};!function(e){t.richtextarea={add_rte_to_visible_textareas:function(){e("textarea.fm-richtext:visible").each((function(){var i,n,r,o;if(!e(this).hasClass("fm-tinymce")&&(e(this).addClass("fm-tinymce"),i=e(this).attr("id"),"undefined"!=typeof tinymce)){if(void 0===tinyMCEPreInit.mceInit[i]){if(o=e(this).data("proto-id"),e(this).closest(".fm-wrapper").html(e(this).closest(".fm-wrapper").html().replace(new RegExp(o,"g"),i)),!o||void 0===tinyMCEPreInit.mceInit[o])return;(n=e.extend(!0,{},tinyMCEPreInit.mceInit[o])).body_class=n.body_class.replace(o,i),n.selector=n.selector.replace(o,i),n.wp_skip_init=!1,tinyMCEPreInit.mceInit[i]=n,o&&void 0!==tinyMCEPreInit.qtInit[o]&&((r=e.extend(!0,{},tinyMCEPreInit.qtInit[o])).id=r.id.replace(o,i),tinyMCEPreInit.qtInit[i]=r)}try{"html"!==t.richtextarea.mode_enabled(this)&&(tinymce.init(tinyMCEPreInit.mceInit[i]),e(this).closest(".wp-editor-wrap").on("click.wp-editor",(function(){this.id&&(window.wpActiveEditor=this.id.slice(3,-5))})))}catch(t){}try{void 0!==tinyMCEPreInit.qtInit[i]&&(quicktags(tinyMCEPreInit.qtInit[i]),"undefined"!=typeof QTags&&-1!==i.indexOf("-dynamic-")&&QTags._buttonsInit())}catch(t){}}}))},reload_editors:function(i,n){n&&void 0!==n.nodeType&&e(".fm-tinymce",n).each((function(){var i,n="html"===t.richtextarea.mode_enabled(this),r=tinymce.get(this.id),o=r.getContent();n&&e("#"+this.id+"-tmce").click(),i="mceRemoveControl",parseInt(tinymce.majorVersion)>=4&&(i="mceRemoveEditor"),tinymce.execCommand(i,!1,this.id),i="mceAddControl",parseInt(tinymce.majorVersion)>=4&&(i="mceAddEditor"),tinymce.execCommand(i,!1,this.id),(r=tinymce.get(this.id)).setContent(o),n&&e("#"+this.id+"-html").click()}))},mode_enabled:function(t){return e(t).closest(".html-active").length?"html":"tinymce"},reset_core_editor_mode:function(){"html"!==i&&"tinymce"!==i||setUserSetting("editor",i)},should_readd_rte:function(e,i){i.classList.contains("closed")||!i.querySelector("textarea.fm-richtext")||i.querySelector("textarea.fm-tinymce")||t.richtextarea.add_rte_to_visible_textareas()}},e(document).on("fm_collapsible_toggle fm_added_element fm_activate_tab fm_displayif_toggle",t.richtextarea.add_rte_to_visible_textareas),e(document).on("fm_sortable_drop",t.richtextarea.reload_editors),e(document).on("postbox-toggled",t.richtextarea.should_readd_rte),e(document).on("click",".fm-richtext .wp-switch-editor",(function(){var i=this.id,n=i.length,r=i.substr(0,n-5),o="html"===i.substr(n-4)?"html":"tinymce";"fm-edit-dynamic"!==r.substr(0,15)&&e(this).closest(".fm-richtext-remember-editor").length&&setUserSetting("editor_"+r.replace(/-/g,"_").replace(/[^a-z0-9_]/gi,""),o),setTimeout(t.richtextarea.reset_core_editor_mode,50)}));var i=getUserSetting("editor");e(document).on("click","#content-tmce,#content-html",(function(){var t=this.id,e=t.length,n=(t.substr(0,e-5),"html"===t.substr(e-4)?"html":"tinymce");i=n})),fmLoadModule((function(){t.richtextarea.add_rte_to_visible_textareas(),e(".meta-box-sortables").on("sortstop",(function(e,i){t.richtextarea.reload_editors(e,i.item[0])}))}))}(jQuery)}();
//# sourceMappingURL=richtext.bundle.min.js.map